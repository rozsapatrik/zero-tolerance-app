<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>zero-tolerance-app documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">zero-tolerance-app documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content component">
                   <div class="content-data">




<ol class="breadcrumb">
  <li class="breadcrumb-item">Components</li>
  <li class="breadcrumb-item"
  >
  HomeComponent</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" class="nav-link"
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
        <li class="nav-item">
            <a href="#templateData" class="nav-link"
                role="tab" id="templateData-tab" data-bs-toggle="tab" data-link="template">Template</a>
        </li>
        <li class="nav-item">
            <a href="#styleData" class="nav-link"
                role="tab" id="styleData-tab" data-bs-toggle="tab" data-link="style">Styles</a>
        </li>
        <li class="nav-item">
            <a href="#tree" class="nav-link"
                role="tab" id="tree-tab" data-bs-toggle="tab" data-link="dom-tree">DOM Tree</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info"><p class="comment">
    <h3>File</h3>
</p>
<p class="comment">
    <code>src/app/tracking/components/home/home.component.ts</code>
</p>


    <p class="comment">
        <h3>Description</h3>
    </p>
    <p class="comment">
        <p>Displays the drink tracking page and the overall data.</p>

    </p>


    <p class="comment">
        <h3>Implements</h3>
    </p>
    <p class="comment">
                <code>OnInit</code>
    </p>


<section data-compodoc="block-metadata">
    <h3>Metadata</h3>
    <table class="table table-sm table-hover metadata">
        <tbody>












            <tr>
                <td class="col-md-3">selector</td>
                <td class="col-md-9"><code>app-home</code></td>
            </tr>



            <tr>
                <td class="col-md-3">styleUrls</td>
                <td class="col-md-9"><code>./home.component.scss</code></td>
            </tr>



            <tr>
                <td class="col-md-3">templateUrl</td>
                <td class="col-md-9"><code>./home.component.html</code></td>
            </tr>








        </tbody>
    </table>
</section>

    <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#bac" >bac</a>
                            </li>
                            <li>
                                <a href="#dateAnimationKey" >dateAnimationKey</a>
                            </li>
                            <li>
                                    <span class="modifier"></span>
                                <a href="#dateInput" >dateInput</a>
                            </li>
                            <li>
                                <a href="#drinksForTheDay" >drinksForTheDay</a>
                            </li>
                            <li>
                                <a href="#isTotalsShown" >isTotalsShown</a>
                            </li>
                            <li>
                                <a href="#selectedDate" >selectedDate</a>
                            </li>
                            <li>
                                <a href="#soberTime" >soberTime</a>
                            </li>
                            <li>
                                <a href="#totalCalories" >totalCalories</a>
                            </li>
                            <li>
                                <a href="#totalDrinks" >totalDrinks</a>
                            </li>
                            <li>
                                <a href="#userData" >userData</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#calculateBAC" >calculateBAC</a>
                            </li>
                            <li>
                                <a href="#calculateTotals" >calculateTotals</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#deleteDrinkFromFirestore" >deleteDrinkFromFirestore</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchDrinksForTheDay" >fetchDrinksForTheDay</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#fetchUserData" >fetchUserData</a>
                            </li>
                            <li>
                                <a href="#getFormattedDate" >getFormattedDate</a>
                            </li>
                            <li>
                                <a href="#hideTotals" >hideTotals</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#ngOnInit" >ngOnInit</a>
                            </li>
                            <li>
                                <a href="#onDateChange" >onDateChange</a>
                            </li>
                            <li>
                                <a href="#openDatePicker" >openDatePicker</a>
                            </li>
                            <li>
                                <a href="#redirectToDrinks" >redirectToDrinks</a>
                            </li>
                            <li>
                                <a href="#showTotals" >showTotals</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

    <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(afs: AngularFirestore, userService: <a href="../injectables/UserService.html" target="_self">UserService</a>, dateService: <a href="../injectables/DateService.html" target="_self">DateService</a>, notyfService: <a href="../injectables/NotyfService.html" target="_self">NotyfService</a>, navigationService: <a href="../injectables/NavigationService.html" target="_self">NavigationService</a>, spinnerService: NgxSpinnerService)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="141" class="link-to-prism">src/app/tracking/components/home/home.component.ts:141</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>afs</td>
                                                  
                                                        <td>
                                                                    <code>AngularFirestore</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Angular Firestore.</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>userService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UserService.html" target="_self" >UserService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Service for user data.</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>dateService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/DateService.html" target="_self" >DateService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Service for proper date usage.</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>notyfService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/NotyfService.html" target="_self" >NotyfService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Service for displaying messages.</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>navigationService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/NavigationService.html" target="_self" >NavigationService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Service for spinner loading navigation.</p>

                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>spinnerService</td>
                                                  
                                                        <td>
                                                                    <code>NgxSpinnerService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                        <td>
                                                                <p>Service for spinner loading.</p>

                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>





    <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateBAC"></a>
                    <span class="name">
                        <span ><b>calculateBAC</b></span>
                        <a href="#calculateBAC"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>calculateBAC()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="283"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:283</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Calculates estimated BAC and sober time</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                <p>The date object for today&#39;s drinks or nothing if there is an error.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="calculateTotals"></a>
                    <span class="name">
                        <span ><b>calculateTotals</b></span>
                        <a href="#calculateTotals"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>calculateTotals()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="412"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:412</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Calculates total calories and drinks for the day.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="deleteDrinkFromFirestore"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>deleteDrinkFromFirestore</b></span>
                        <a href="#deleteDrinkFromFirestore"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>deleteDrinkFromFirestore(drink: <a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank">any</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="468"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:468</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Removes the selected drink from the user&#39;s consumed drinks.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>drink</td>
                                            <td>
                                                            <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>The drink to be deleted.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchDrinksForTheDay"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchDrinksForTheDay</b></span>
                        <a href="#fetchDrinksForTheDay"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchDrinksForTheDay()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="225"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:225</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Fetches the user&#39;s consumed drinks for the day.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="fetchUserData"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>fetchUserData</b></span>
                        <a href="#fetchUserData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>fetchUserData()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="208"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:208</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Fetches user data.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getFormattedDate"></a>
                    <span class="name">
                        <span ><b>getFormattedDate</b></span>
                        <a href="#getFormattedDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>getFormattedDate(date: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank">Date</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="446"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:446</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Formats the given date.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Description</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>date</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                            <td>
                                                    <p>The given date.</p>

                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                        </div>
                            <div class="io-description">
                                <p>The given date but properly formatted.</p>

                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hideTotals"></a>
                    <span class="name">
                        <span ><b>hideTotals</b></span>
                        <a href="#hideTotals"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>hideTotals()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="201"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:201</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Hides the totals panel.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnInit"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>ngOnInit</b></span>
                        <a href="#ngOnInit"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>ngOnInit()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="170"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:170</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Initializes the page.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>    <code>Promise&lt;void&gt;</code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="onDateChange"></a>
                    <span class="name">
                        <span ><b>onDateChange</b></span>
                        <a href="#onDateChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>onDateChange(direction: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="424"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:424</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Sets proper data on date change.</p>
</div>

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>direction</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="openDatePicker"></a>
                    <span class="name">
                        <span ><b>openDatePicker</b></span>
                        <a href="#openDatePicker"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>openDatePicker()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="453"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:453</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Opens the date picker.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="redirectToDrinks"></a>
                    <span class="name">
                        <span ><b>redirectToDrinks</b></span>
                        <a href="#redirectToDrinks"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>redirectToDrinks()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="460"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:460</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Redirects to drink list page.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="showTotals"></a>
                    <span class="name">
                        <span ><b>showTotals</b></span>
                        <a href="#showTotals"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>showTotals()</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="194"
                                    class="link-to-prism">src/app/tracking/components/home/home.component.ts:194</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">
                        <div class="io-description"><p>Shows the totals panel.</p>
</div>

                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                        </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
    <section data-compodoc="block-properties">
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="bac"></a>
                    <span class="name">
                        <span ><b>bac</b></span>
                        <a href="#bac"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="133" class="link-to-prism">src/app/tracking/components/home/home.component.ts:133</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Blood alcohol content for the day.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dateAnimationKey"></a>
                    <span class="name">
                        <span ><b>dateAnimationKey</b></span>
                        <a href="#dateAnimationKey"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="113" class="link-to-prism">src/app/tracking/components/home/home.component.ts:113</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Variable to help date change animation.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="dateInput"></a>
                    <span class="name">
                            <span class="modifier"></span>
                        <span ><b>dateInput</b></span>
                        <a href="#dateInput"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ElementRef&lt;HTMLInputElement&gt;</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <b>Decorators : </b>
                        <br />
                        <code>
                            @ViewChild(&#x27;dateInput&#x27;)<br />
                        </code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="165" class="link-to-prism">src/app/tracking/components/home/home.component.ts:165</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Reference to the <code>dateInput</code> element.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="drinksForTheDay"></a>
                    <span class="name">
                        <span ><b>drinksForTheDay</b></span>
                        <a href="#drinksForTheDay"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>any[]</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>[]</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="121" class="link-to-prism">src/app/tracking/components/home/home.component.ts:121</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Drinks for the selected day.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isTotalsShown"></a>
                    <span class="name">
                        <span ><b>isTotalsShown</b></span>
                        <a href="#isTotalsShown"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean" target="_blank" >Boolean</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>false</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="109" class="link-to-prism">src/app/tracking/components/home/home.component.ts:109</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Boolean for showing totals.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="selectedDate"></a>
                    <span class="name">
                        <span ><b>selectedDate</b></span>
                        <a href="#selectedDate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" >Date</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="117" class="link-to-prism">src/app/tracking/components/home/home.component.ts:117</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The selected date.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="soberTime"></a>
                    <span class="name">
                        <span ><b>soberTime</b></span>
                        <a href="#soberTime"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Date | null</code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>null</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="137" class="link-to-prism">src/app/tracking/components/home/home.component.ts:137</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The time by the user will be sober approximately.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalCalories"></a>
                    <span class="name">
                        <span ><b>totalCalories</b></span>
                        <a href="#totalCalories"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="125" class="link-to-prism">src/app/tracking/components/home/home.component.ts:125</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Total calories for the day.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="totalDrinks"></a>
                    <span class="name">
                        <span ><b>totalDrinks</b></span>
                        <a href="#totalDrinks"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>0</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="129" class="link-to-prism">src/app/tracking/components/home/home.component.ts:129</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Total amount of drinks for the day.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="userData"></a>
                    <span class="name">
                        <span ><b>userData</b></span>
                        <a href="#userData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/UserData.html" target="_self" >UserData</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="141" class="link-to-prism">src/app/tracking/components/home/home.component.ts:141</a></div>
                        </td>
                    </tr>

            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>The user&#39;s personal data.</p>
</div>
                </td>
            </tr>

        </tbody>
    </table>
</section>

</div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, ElementRef, OnInit, ViewChild } from &#x27;@angular/core&#x27;;
import { AngularFirestore } from &#x27;@angular/fire/compat/firestore&#x27;;
import { animate, style, transition, trigger } from &#x27;@angular/animations&#x27;;
import { DateService } from &#x27;src/app/core/services/date.service&#x27;;
import { UserService } from &#x27;src/app/core/services/user/user.service&#x27;;
import { NotyfService } from &#x27;src/app/core/services/notyf/notyf.service&#x27;;
import { NavigationService } from &#x27;src/app/core/services/navigation.service&#x27;;
import { NgxSpinnerService } from &#x27;ngx-spinner&#x27;;

/**
 * Interface for the consumed drink data.
 */
interface DrinkData {
  drinkAmounts: {
    [key: string]: {
      id: string;
      amount: number;
      calories: number;
      alcohol: number;
      time: string;
    }[];
  };
}

/**
 * Interface for the user&#x27;s personal data.
 */
interface UserData {
  weight: number;
  gender: string;
}

/**
 * Displays the drink tracking page and the overall data.
 */
@Component({
  selector: &#x27;app-home&#x27;,
  templateUrl: &#x27;./home.component.html&#x27;,
  styleUrls: [&#x27;./home.component.scss&#x27;],
  animations: [
    trigger(&#x27;scale&#x27;, [
      transition(&#x27;:enter&#x27;, [
        style({ transform: &#x27;scale(0.8)&#x27;, opacity: 0 }),
        animate(&#x27;200ms ease-out&#x27;, style({ transform: &#x27;scale(1)&#x27;, opacity: 1 })),
      ]),
      transition(&#x27;:leave&#x27;, [
        animate(
          &#x27;200ms ease-in&#x27;,
          style({ transform: &#x27;scale(0.8)&#x27;, opacity: 0 })
        ),
      ]),
    ]),
    trigger(&#x27;slide&#x27;, [
      transition(&#x27;:enter&#x27;, [
        style({ transform: &#x27;translateY(-20px)&#x27;, opacity: 0 }),
        animate(
          &#x27;300ms ease-out&#x27;,
          style({ transform: &#x27;translateY(0)&#x27;, opacity: 1 })
        ),
      ]),
      transition(&#x27;:leave&#x27;, [
        animate(
          &#x27;300ms ease-in&#x27;,
          style({ transform: &#x27;translateY(-20px)&#x27;, opacity: 0 })
        ),
      ]),
    ]),
    trigger(&#x27;fadeDate&#x27;, [
      transition(&#x27;* &#x3D;&gt; *&#x27;, [
        style({ opacity: 0, transform: &#x27;scale(0.9)&#x27; }),
        animate(&#x27;200ms ease-out&#x27;, style({ opacity: 1, transform: &#x27;scale(1)&#x27; })),
      ]),
    ]),
    trigger(&#x27;slideGrow&#x27;, [
      transition(&#x27;:enter&#x27;, [
        style({
          opacity: 0,
          transform: &#x27;translateY(-10px)&#x27;,
          maxHeight: &#x27;0&#x27;,
          overflow: &#x27;hidden&#x27;,
        }),
        animate(
          &#x27;300ms ease-out&#x27;,
          style({
            opacity: 1,
            transform: &#x27;translateY(0)&#x27;,
            maxHeight: &#x27;1000px&#x27;,
          })
        ),
      ]),
      transition(&#x27;:leave&#x27;, [
        animate(
          &#x27;200ms ease-in&#x27;,
          style({
            opacity: 0,
            transform: &#x27;translateY(-10px)&#x27;,
            maxHeight: &#x27;0&#x27;,
            overflow: &#x27;hidden&#x27;,
          })
        ),
      ]),
    ]),
  ],
})
export class HomeComponent implements OnInit {
  /**
   * Boolean for showing totals.
   */
  isTotalsShown: Boolean &#x3D; false;
  /**
   * Variable to help date change animation.
   */
  dateAnimationKey &#x3D; 0;
  /**
   * The selected date.
   */
  selectedDate: Date;
  /**
   * Drinks for the selected day.
   */
  drinksForTheDay: any[] &#x3D; [];
  /**
   * Total calories for the day.
   */
  totalCalories: number &#x3D; 0;
  /**
   * Total amount of drinks for the day.
   */
  totalDrinks: number &#x3D; 0;
  /**
   * Blood alcohol content for the day.
   */
  bac: number &#x3D; 0;
  /**
   * The time by the user will be sober approximately.
   */
  soberTime: Date | null &#x3D; null;
  /**
   * The user&#x27;s personal data.
   */
  userData: UserData;

  /**
   *
   * @param afs Angular Firestore.
   * @param userService Service for user data.
   * @param dateService Service for proper date usage.
   * @param router Router for routing.
   * @param notyfService Service for displaying messages.
   * @param navigationService Service for spinner loading navigation.
   * @param spinnerService Service for spinner loading.
   */
  constructor(
    private afs: AngularFirestore,
    private userService: UserService,
    private dateService: DateService,
    private notyfService: NotyfService,
    private navigationService: NavigationService,
    private spinnerService: NgxSpinnerService
  ) {}

  /**
   * Reference to the &#x60;dateInput&#x60; element.
   */
  @ViewChild(&#x27;dateInput&#x27;) dateInput!: ElementRef&lt;HTMLInputElement&gt;;

  /**
   * Initializes the page.
   */
  async ngOnInit(): Promise&lt;void&gt; {
    /**
     * Initializes selected date from DateService or today&#x27;s date.
     */
    this.selectedDate &#x3D; this.dateService.getSelectedDate() || new Date();
    await this.fetchUserData();

    /**
     * Fetches drinks data for the selected date.
     */
    this.fetchDrinksForTheDay();

    /**
     * Watches for date changes and loads drinks.
     */
    await this.dateService.selectedDate$.subscribe((date) &#x3D;&gt; {
      this.selectedDate &#x3D; date;
      this.fetchDrinksForTheDay();
    });
  }

  /**
   * Shows the totals panel.
   */
  showTotals() {
    this.isTotalsShown &#x3D; true;
  }

  /**
   * Hides the totals panel.
   */
  hideTotals() {
    this.isTotalsShown &#x3D; false;
  }

  /**
   * Fetches user data.
   */
  async fetchUserData(): Promise&lt;void&gt; {
    const currentUserID &#x3D; await this.userService.getCurrentUserId();
    if (currentUserID) {
      const userDoc &#x3D; await this.afs
        .collection(&#x27;user&#x27;)
        .doc(currentUserID)
        .get()
        .toPromise();
      if (userDoc &amp;&amp; userDoc.exists) {
        this.userData &#x3D; userDoc.data() as UserData;
      }
    }
  }

  /**
   * Fetches the user&#x27;s consumed drinks for the day.
   */
  async fetchDrinksForTheDay(): Promise&lt;void&gt; {
    // Clears previous data
    this.drinksForTheDay &#x3D; [];
    const currentUserID &#x3D; await this.userService.getCurrentUserId();

    if (currentUserID &amp;&amp; this.selectedDate) {
      const formattedDate &#x3D; &#x60;${this.selectedDate.getFullYear()}-${(
        this.selectedDate.getMonth() + 1
      )
        .toString()
        .padStart(2, &#x27;0&#x27;)}-${this.selectedDate
        .getDate()
        .toString()
        .padStart(2, &#x27;0&#x27;)}&#x60;;
      const docId &#x3D; &#x60;${currentUserID}-${formattedDate}&#x60;; // Create document ID based on user and date

      const docRef &#x3D; this.afs.collection(&#x27;drankDrinks&#x27;).doc(docId);
      const docSnapshot &#x3D; await docRef.get().toPromise();

      if (docSnapshot &amp;&amp; docSnapshot.exists) {
        const drinkData &#x3D; docSnapshot.data() as {
          drinkAmounts?: Record&lt;
            string,
            {
              id: string;
              amount: number;
              time: string;
              calories: number;
              alcohol: number;
            }[]
          &gt;;
        };

        this.drinksForTheDay &#x3D; drinkData?.drinkAmounts
          ? Object.entries(drinkData.drinkAmounts)
              .map(([name, detailsArray]) &#x3D;&gt; {
                return detailsArray.map((detail) &#x3D;&gt; ({
                  name,
                  id: detail.id,
                  amount: detail.amount,
                  calories: detail.calories,
                  alcohol: detail.alcohol,
                  time: detail.time,
                }));
              })
              .flat()
          : [];

        this.calculateTotals();
        this.calculateBAC();
      }
    }
  }

  /**
   * Calculates estimated BAC and sober time
   * @returns The date object for today&#x27;s drinks or nothing if there is an error.
   */
  calculateBAC(): void {
    if (!this.userData) {
      console.error(&#x27;User data not available or invalid for BAC calculation.&#x27;);
      return;
    }

    const { weight, gender } &#x3D; this.userData;
    const bodyWaterConstant &#x3D; gender &#x3D;&#x3D;&#x3D; &#x27;male&#x27; ? 0.58 : 0.49;
    const metabolismRate &#x3D; 0.015;
    const weightInGrams &#x3D; weight * 1000;
    const currentTime &#x3D; new Date();
    let selectedDateObj &#x3D; this.selectedDate;

    // Handle drinksForTheDay being null or undefined
    // Construct full date objects for drink times
    const allDrinksToday &#x3D; (this.drinksForTheDay || [])
      .map((drink) &#x3D;&gt; {
        const [hours, minutes] &#x3D; drink.time.split(&#x27;:&#x27;).map(Number);
        const drinkDate &#x3D; new Date(selectedDateObj);
        drinkDate.setHours(hours, minutes, 0, 0);
        return { ...drink, drinkDate, alcohol: Number(drink.alcohol) || 0 };
      })
      .filter((drink) &#x3D;&gt; drink !&#x3D;&#x3D; null) as {
      alcohol: number;
      drinkDate: Date;
      [key: string]: any;
    }[]; // Type assertion after filter for array

    allDrinksToday.sort(
      (a, b) &#x3D;&gt; a.drinkDate.getTime() - b.drinkDate.getTime()
    );

    // Calculate current BAC
    let currentBacInternal &#x3D; 0;
    let lastProcessedDrinkTimeForBac: Date | null &#x3D; null;

    const pastAndCurrentDrinks &#x3D; allDrinksToday.filter(
      (drink) &#x3D;&gt; drink.drinkDate &lt;&#x3D; currentTime
    );

    if (pastAndCurrentDrinks.length &gt; 0) {
      // Initialize with the time of the first relevant drink
      lastProcessedDrinkTimeForBac &#x3D; new Date(
        pastAndCurrentDrinks[0].drinkDate.getTime()
      );

      for (const drink of pastAndCurrentDrinks) {
        // Metabolize BAC from lastProcessedDrinkTimeForBac up to current drink&#x27;s time
        if (
          currentBacInternal &gt; 0 &amp;&amp;
          drink.drinkDate &gt; lastProcessedDrinkTimeForBac
        ) {
          const hoursElapsed &#x3D;
            (drink.drinkDate.getTime() -
              lastProcessedDrinkTimeForBac.getTime()) /
            (1000 * 60 * 60);
          currentBacInternal -&#x3D; metabolismRate * hoursElapsed;
          currentBacInternal &#x3D; Math.max(0, currentBacInternal);
        }

        lastProcessedDrinkTimeForBac &#x3D; new Date(drink.drinkDate.getTime());

        // Add BAC from the current drink
        currentBacInternal +&#x3D;
          (drink.alcohol / (weightInGrams * bodyWaterConstant)) * 100;
      }

      // Metabolize from the time of the last consumed past drink up to current time
      if (
        currentBacInternal &gt; 0 &amp;&amp;
        lastProcessedDrinkTimeForBac &amp;&amp;
        currentTime &gt; lastProcessedDrinkTimeForBac
      ) {
        const hoursElapsedSinceLastDrink &#x3D;
          (currentTime.getTime() - lastProcessedDrinkTimeForBac.getTime()) /
          (1000 * 60 * 60);
        currentBacInternal -&#x3D; metabolismRate * hoursElapsedSinceLastDrink;
      }
    }
    this.bac &#x3D; Math.max(0, currentBacInternal);

    // Estimate sober time for the day
    let simulatedBac &#x3D; 0;
    let currentSimTime: Date | null &#x3D; null;

    if (allDrinksToday.length &#x3D;&#x3D;&#x3D; 0) {
      this.soberTime &#x3D; null;
    } else {
      // Start simulation from the time of the first drink
      currentSimTime &#x3D; new Date(allDrinksToday[0].drinkDate.getTime());

      for (const drink of allDrinksToday) {
        // Metabolize existing BAC from currentSimTime up to this drink&#x27;s time
        if (simulatedBac &gt; 0 &amp;&amp; drink.drinkDate &gt; currentSimTime) {
          const hoursToDrink &#x3D;
            (drink.drinkDate.getTime() - currentSimTime.getTime()) /
            (1000 * 60 * 60);
          simulatedBac -&#x3D; metabolismRate * hoursToDrink;
          simulatedBac &#x3D; Math.max(0, simulatedBac);
        }

        // Advance simulation time to the current drink&#x27;s time
        currentSimTime &#x3D; new Date(
          Math.max(currentSimTime.getTime(), drink.drinkDate.getTime())
        );

        // Add BAC from this drink
        simulatedBac +&#x3D;
          (drink.alcohol / (weightInGrams * bodyWaterConstant)) * 100;
      }

      // Calculate time to zero from currentSimTime (time of last drink&#x27;s effect)
      if (simulatedBac &gt; 0 &amp;&amp; currentSimTime) {
        const hoursToSober &#x3D; simulatedBac / metabolismRate;
        this.soberTime &#x3D; new Date(
          currentSimTime.getTime() + hoursToSober * 60 * 60 * 1000
        );
      } else if (currentSimTime) {
        this.soberTime &#x3D; new Date(currentSimTime.getTime());
      } else {
        // Shouldn&#x27;t happen if allDrinksToday but fallback
        this.soberTime &#x3D; null;
      }
    }
  }

  /**
   * Calculates total calories and drinks for the day.
   */
  calculateTotals(): void {
    this.totalCalories &#x3D; this.drinksForTheDay.reduce(
      (sum, drink) &#x3D;&gt; sum + (drink.calories || 0),
      0
    );
    this.totalDrinks &#x3D; this.drinksForTheDay.length;
  }

  /**
   * Sets proper data on date change.
   * @param event The event that triggers this method.
   */
  onDateChange(direction: string) {
    const originalDate &#x3D; new Date(document.getElementById(&#x27;date&#x27;)!.innerHTML);

    if (direction &#x3D;&#x3D;&#x3D; &#x27;back&#x27;) {
      const prevDay &#x3D; originalDate;
      prevDay.setDate(originalDate.getDate() - 1);
      this.dateService.setSelectedDate(prevDay);
    } else if (direction &#x3D;&#x3D;&#x3D; &#x27;forward&#x27;) {
      const nextDay &#x3D; originalDate;
      nextDay.setDate(originalDate.getDate() + 1);
      this.dateService.setSelectedDate(nextDay);
    }
    // Since angular animations only trigger when the bound element&#x27;s state changes
    // we need this key to always change
    this.dateAnimationKey++;
  }

  /**
   * Formats the given date.
   * @param date The given date.
   * @returns The given date but properly formatted.
   */
  getFormattedDate(date: Date): string {
    return date.toISOString().split(&#x27;T&#x27;)[0]; // Formats date as YYYY-MM-DD for the input field
  }

  /**
   * Opens the date picker.
   */
  openDatePicker() {
    this.dateInput.nativeElement.showPicker(); // Opens the native date picker
  }

  /**
   * Redirects to drink list page.
   */
  redirectToDrinks() {
    this.navigationService.navigate(&#x27;/tracking/drinklist&#x27;);
  }

  /**
   * Removes the selected drink from the user&#x27;s consumed drinks.
   * @param drink The drink to be deleted.
   */
  async deleteDrinkFromFirestore(drink: any): Promise&lt;void&gt; {
    const userId &#x3D; await this.userService.getCurrentUserId();
    const formattedDate &#x3D; &#x60;${this.selectedDate.getFullYear()}-${(
      this.selectedDate.getMonth() + 1
    )
      .toString()
      .padStart(2, &#x27;0&#x27;)}-${this.selectedDate
      .getDate()
      .toString()
      .padStart(2, &#x27;0&#x27;)}&#x60;;
    const docId &#x3D; &#x60;${userId}-${formattedDate}&#x60;;

    const docRef &#x3D; this.afs.collection(&#x27;drankDrinks&#x27;).doc(docId);

    try {
      const docSnapshot &#x3D; await docRef.get().toPromise();
      if (docSnapshot &amp;&amp; docSnapshot.exists) {
        const drinkData &#x3D; docSnapshot.data() as DrinkData;
        if (drinkData &amp;&amp; drinkData.drinkAmounts) {
          const drinkAmounts &#x3D; drinkData.drinkAmounts;

          for (const drinkName in drinkAmounts) {
            const entries &#x3D; drinkAmounts[drinkName];

            // Find the specific entry by name and id
            const entryIndex &#x3D; entries.findIndex(
              (entry: any) &#x3D;&gt; entry.id &#x3D;&#x3D;&#x3D; drink.id
            );

            if (entryIndex !&#x3D;&#x3D; -1) {
              // Delete the specific entry by its id
              entries.splice(entryIndex, 1);
              break;
            }
          }

          await docRef.set({ ...drinkData, drinkAmounts }, { merge: true });
          this.notyfService.success(&#x27;Drink deleted&#x27;);

          this.fetchDrinksForTheDay();
        }
      } else {
        this.notyfService.error(&#x27;No document found&#x27;);
      }
    } catch (error) {
      this.notyfService.error(&#x27;Something went wrong&#x27;);
      console.error(&#x27;Error fetching or deleting document: &#x27;, error);
    }
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="templateData">
        <pre class="line-numbers"><code class="language-html">&lt;div class&#x3D;&quot;zt-input date-picker&quot;&gt;
  &lt;i role&#x3D;&quot;button&quot; (click)&#x3D;&quot;onDateChange(&#x27;back&#x27;)&quot; class&#x3D;&quot;material-icons&quot;
    &gt;arrow_circle_down&lt;/i
  &gt;
  &lt;span id&#x3D;&quot;date&quot; [@fadeDate]&#x3D;&quot;dateAnimationKey&quot;&gt;{{
    getFormattedDate(selectedDate)
  }}&lt;/span&gt;
  &lt;i role&#x3D;&quot;button&quot; (click)&#x3D;&quot;onDateChange(&#x27;forward&#x27;)&quot; class&#x3D;&quot;material-icons&quot;
    &gt;arrow_circle_up&lt;/i
  &gt;
&lt;/div&gt;

&lt;div *ngIf&#x3D;&quot;drinksForTheDay.length &gt; 0&quot;&gt;
  &lt;ul class&#x3D;&quot;drink-list&quot;&gt;
    &lt;li *ngFor&#x3D;&quot;let drink of drinksForTheDay&quot; [@slideGrow]&gt;
      &lt;span class&#x3D;&quot;drink-name&quot;&gt;{{ drink.name }}&lt;/span&gt;
      &lt;div class&#x3D;&quot;drink-li-data&quot;&gt;
        &lt;span&gt;{{ drink.time }}&lt;/span&gt;
        &lt;span
          &gt;{{ drink.calories | trimDecimals : 2 }} kcal -
          {{ drink.amount }} ml&lt;/span
        &gt;
      &lt;/div&gt;
      &lt;i
        role&#x3D;&quot;button&quot;
        (click)&#x3D;&quot;deleteDrinkFromFirestore(drink)&quot;
        class&#x3D;&quot;material-icons close-button&quot;
        &gt;highlight_remove&lt;/i
      &gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;
&lt;div *ngIf&#x3D;&quot;drinksForTheDay.length &#x3D;&#x3D;&#x3D; 0&quot; class&#x3D;&quot;no-drinks&quot;&gt;
  &lt;p&gt;No drinks recorded for this day&lt;/p&gt;
&lt;/div&gt;

&lt;div class&#x3D;&quot;info-container&quot; *ngIf&#x3D;&quot;totalDrinks !&#x3D; 0 &amp;&amp; isTotalsShown&quot; @scale&gt;
  &lt;i class&#x3D;&quot;material-icons hide-button&quot; role&#x3D;&quot;button&quot; (click)&#x3D;&quot;hideTotals()&quot;
    &gt;close&lt;/i
  &gt;
  &lt;div class&#x3D;&quot;info-div&quot;&gt;
    &lt;div class&#x3D;&quot;total-calories&quot;&gt;
      &lt;span&gt;Total calories&lt;/span&gt;
      &lt;span&gt;{{ totalCalories | trimDecimals : 2 }} kcal&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;number-of-drinks&quot;&gt;
      &lt;span&gt;Number of drinks&lt;/span&gt;
      &lt;span&gt;{{ totalDrinks }}&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;estimated-bac&quot;&gt;
      &lt;span&gt;Estimated BAC&lt;/span&gt;
      &lt;span&gt;{{ bac | number : &quot;1.2-2&quot; }}%&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class&#x3D;&quot;estimated-sober-time&quot;&gt;
      &lt;span&gt;Estimated sober time&lt;/span&gt;
      &lt;span&gt;{{ soberTime | date : &quot;MMM dd EEE HH:mm:ss&quot; }}&lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div class&#x3D;&quot;zt-button-div&quot;&gt;
  &lt;button (click)&#x3D;&quot;redirectToDrinks()&quot; class&#x3D;&quot;zt-button blue&quot;&gt;Add Drink&lt;/button&gt;
  &lt;button
    (click)&#x3D;&quot;showTotals()&quot;
    class&#x3D;&quot;zt-button purple&quot;
    [ngClass]&#x3D;&quot;drinksForTheDay.length &#x3D;&#x3D; 0 ? &#x27;disabled-button&#x27; : &#x27;&#x27;&quot;
    [disabled]&#x3D;&quot;drinksForTheDay.length &#x3D;&#x3D; 0&quot;
  &gt;
    Totals
  &lt;/button&gt;
&lt;/div&gt;
</code></pre>
    </div>

    <div class="tab-pane fade " id="styleData">
                <p class="comment">
                    <code>./home.component.scss</code>
                </p>
                <pre class="line-numbers"><code class="language-scss">@use &quot;variables&quot; as *;

.date-picker {
  display: flex;
  align-items: center;
  justify-content: center;
  column-gap: 4.5rem;

  i {
    &amp;:first-of-type {
      position: relative;
      transform: rotate(90deg);

      &amp;:active {
        top: 2px;
      }
    }

    &amp;:last-of-type {
      position: relative;
      transform: rotate(90deg);

      &amp;:active {
        top: 2px;
      }
    }
  }
}

.info-container {
  position: absolute;
  border-radius: 1rem;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 2000;
  background-color: $ztBlack;
  display: flex;
  align-items: center;
  flex-direction: column;
  row-gap: 1.5rem;
  padding-top: 3rem;

  .hide-button {
    position: absolute;
    right: 0;
    padding-right: 2rem;
  }

  .info-div {
    padding-top: 5rem;

    div {
      display: flex;
      flex-direction: column;
      padding-bottom: 1.5rem;

      span:first-of-type {
        color: gray;
      }

      span:last-of-type {
        font-size: 2rem;
      }
    }
  }
}

.no-drinks {
  display: flex;
  height: 6rem;
  padding-top: 1rem;
  justify-content: center;
  align-items: center;
}

.disabled-button {
  pointer-events: none;
  opacity: 0.6;
}

input.search {
  margin-bottom: 1rem;
}

ul.drink-list {
  list-style: none;
  overflow-y: auto;
  max-height: 20rem;
  -ms-overflow-style: none;
  scrollbar-width: none;
  background-color: $ztGray;
  border-radius: 1rem;
  margin-bottom: 1rem;
  margin-top: 1rem;

  &amp;::-webkit-scrollbar {
    display: none;
  }

  li {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    width: 20rem;
    height: 3rem;

    &amp;:not(:last-child) {
      border-bottom: 1px solid black;
    }

    .drink-name {
      padding-left: 1rem;
      display: flex;
      justify-content: left;
      width: 100%;
    }

    .drink-li-data {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      padding-right: 0.5rem;
      right: 0;
      width: 15rem;

      span:last-of-type {
        font-size: 0.7rem;
        color: gray;
      }
    }

    .close-button {
      position: relative;
      right: 0;
      color: red;
      font-size: 2rem;
      justify-content: flex-end;
      display: flex;
      cursor: pointer;
      padding-right: 0.5rem;
    }
  }
}
</code></pre>
    </div>

    <div class="tab-pane fade " id="tree">
        <div id="tree-container"></div>
        <div class="tree-legend">
            <div class="title">
                <b>Legend</b>
            </div>
            <div>
                <div class="color htmlelement"></div><span>Html element</span>
            </div>
            <div>
                <div class="color component"></div><span>Component</span>
            </div>
            <div>
                <div class="color directive"></div><span>Html element with directive</span>
            </div>
        </div>
    </div>

    
</div>

<script src="../js/libs/vis.min.js"></script>
<script src="../js/libs/htmlparser.js"></script>
<script src="../js/libs/deep-iterator.js"></script>
<script>
        var COMPONENT_TEMPLATE = '<div><div class="zt-input date-picker">  <i role="button" (click)="onDateChange(\'back\')" class="material-icons"    >arrow_circle_down</i  >  <span id="date" [@fadeDate]="dateAnimationKey">{{    getFormattedDate(selectedDate)  }}</span>  <i role="button" (click)="onDateChange(\'forward\')" class="material-icons"    >arrow_circle_up</i  ></div><div *ngIf="drinksForTheDay.length > 0">  <ul class="drink-list">    <li *ngFor="let drink of drinksForTheDay" [@slideGrow]>      <span class="drink-name">{{ drink.name }}</span>      <div class="drink-li-data">        <span>{{ drink.time }}</span>        <span          >{{ drink.calories | trimDecimals : 2 }} kcal -          {{ drink.amount }} ml</span        >      </div>      <i        role="button"        (click)="deleteDrinkFromFirestore(drink)"        class="material-icons close-button"        >highlight_remove</i      >    </li>  </ul></div><div *ngIf="drinksForTheDay.length === 0" class="no-drinks">  <p>No drinks recorded for this day</p></div><div class="info-container" *ngIf="totalDrinks != 0 && isTotalsShown" @scale>  <i class="material-icons hide-button" role="button" (click)="hideTotals()"    >close</i  >  <div class="info-div">    <div class="total-calories">      <span>Total calories</span>      <span>{{ totalCalories | trimDecimals : 2 }} kcal</span>    </div>    <div class="number-of-drinks">      <span>Number of drinks</span>      <span>{{ totalDrinks }}</span>    </div>    <div class="estimated-bac">      <span>Estimated BAC</span>      <span>{{ bac | number : "1.2-2" }}%</span>    </div>    <div class="estimated-sober-time">      <span>Estimated sober time</span>      <span>{{ soberTime | date : "MMM dd EEE HH:mm:ss" }}</span>    </div>  </div></div><div class="zt-button-div">  <button (click)="redirectToDrinks()" class="zt-button blue">Add Drink</button>  <button    (click)="showTotals()"    class="zt-button purple"    [ngClass]="drinksForTheDay.length == 0 ? \'disabled-button\' : \'\'"    [disabled]="drinksForTheDay.length == 0"  >    Totals  </button></div></div>'
    var COMPONENTS = [{'name': 'AboutUsComponent', 'selector': 'app-about-us'},{'name': 'AdminFormComponent', 'selector': 'app-admin-form'},{'name': 'AdminPageComponent', 'selector': 'app-admin-page'},{'name': 'AppComponent', 'selector': 'app-root'},{'name': 'DrinkListComponent', 'selector': 'app-drink-list'},{'name': 'HomeComponent', 'selector': 'app-home'},{'name': 'LandingPageComponent', 'selector': 'app-landing-page'},{'name': 'LoginComponent', 'selector': 'app-login'},{'name': 'NavigationComponent', 'selector': 'app-navigation'},{'name': 'PageNotFoundComponent', 'selector': 'app-page-not-found'},{'name': 'ProfileComponent', 'selector': 'app-profile'},{'name': 'RedirectComponent', 'selector': 'app-redirect'},{'name': 'RegisterComponent', 'selector': 'app-register'},{'name': 'StatsComponent', 'selector': 'app-stats'},{'name': 'UpdateProfileComponent', 'selector': 'app-update-profile'}];
    var DIRECTIVES = [];
    var ACTUAL_COMPONENT = {'name': 'HomeComponent'};
</script>
<script src="../js/tree.js"></script>

















                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'component';
            var COMPODOC_CURRENT_PAGE_URL = 'HomeComponent.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
